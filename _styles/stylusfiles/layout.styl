@require '../stylusfiles/vars.styl'

// base {{{
body
    overflow-y: visible
    overflow-x: hidden
    height: auto

section
    margin: 0
    width: 100%

h1
h2
h3
    margin: 0

img
    margin: 0
    padding: 0
    border: none


ul
    margin: 0
    padding: 0
    list-style: none


// /base }}}
// site header {{{
#site_header
    height: $site_header_height
    flex: 0 0 @height
    position: relative
    display: flex
    flex-direction: row
    justify-content: space-between
    align-items: flex-start
    z-index: 700

// logo {{{
#site_logo
    flex: 0 0 $site_header_logo_width
    height: $site_header_logo_height
    margin: ($site_header_height - $site_header_logo_height) * 0.5
    position: relative
    z-index: 1001

#site_logo__icon
    position: absolute
    height: 100%
    width: 100%

// /logo }}}
// contacts box {{{
#site_contacts_wrap
    flex: 0 0 $site_header_contacts_width
    position: relative
    height: $site_header_height - 1.5rem
    margin: 0.5rem 1.5rem 0.5rem 1rem
    z-index: 1001
    display: flex
    flex-direction: column
    justify-content: flex-end
    align-items: flex-end
    align-content: space-between
    flex-wrap: wrap

.site_header__phone
.site_header__call-back
    flex: 0 0 2rem

.site_header__phone
    margin-bottom: .4rem

.site_header__vk_button
    height: 3rem
    width: @height
    flex: 0 0 @height
    margin-left: 1rem

.site_header__call-back
    padding: 0 0.7rem

// /contacts box }}}
// site nav {{{
.site_nav__link
    padding: 0.5rem
    white-space: nowrap

// desktop nav {{{
#desktop_nav
    flex: 1 0 20rem
    height: 100%
    display: flex
    flex-direction: row
    justify-content: space-around
    align-items: stretch
    margin 0 1rem

    .site_nav__link
        padding-top: $site_header_height - 2.3rem

// /desktop nav }}}
// mobile nav {{{

#mobile_nav
    display: none
    position: absolute
    right: 0
    left: calc(100% - 18.75rem)
    top: $site_header_height
    z-index: 999
    flex-direction: column
    justify-content: space-around
    align-items: flex-start
    transform: rotateY(90deg)
    transform-origin: 100% 0
    will-change: transform

    .site_header__phone,
    .site_header__call-back
        width: 100%
        height: 3rem
        min-height: 3rem
        margin: 0

    .site_header__phone
        margin-top: 2rem

    .site_header__vk_button
        height: 2.8rem
        padding: 0.1rem 7.975rem

    .site_header__phone,
    .site_header__call-back,
    .site_header__vk_button
        display: none

    .site_nav__link
        width: 100%

        &:active
            width: 100%

    &.is_open
        transform: rotateY(0)

// /mobile nav }}}
// mobile nav toggle {{{
.mobile_nav_toggle__svg
    transition: all 0.3s ease-out

.mobile_nav_toggle__svg__top_bar
    transform-origin: 0 0

.mobile_nav_toggle__svg__mid_bar
    transform-origin: 50% 50%

.mobile_nav_toggle__svg__bot_bar
    transform-origin: 0 100%

#mobile_nav_toggle
    display: none
    position: relative
    flex: 0 0 3rem
    padding: 1.7rem 2rem
    order: 1
    z-index: 1001

    &.is_open
        .mobile_nav_toggle__svg__top_bar
            transform: translateX(10%) rotate(45deg)

        .mobile_nav_toggle__svg__mid_bar
            transform: rotateY(90deg)

        .mobile_nav_toggle__svg__bot_bar
            transform: translateX(10%) rotate(-45deg)

// /mobile nav toggle }}}
// nav media {{{

@media(max-width: 964px)
    #desktop_nav
        display: none

    #mobile_nav_toggle
        display: block

    #mobile_nav
        display: flex


@media(max-width: 600px)
    #site_contacts_wrap
        display: none

    #mobile_nav
        .site_header__phone,
        .site_header__call-back,
        .site_header__vk_button
            display: block

    .site_header__vk_button
        margin-left: 0

@media(max-width: 349px)
    #site_logo
        flex 0 0 60vw

// /nav media }}}
// /site nav }}}
// /site header }}}
// site footer {{{

#site_footer
    order: 2
    display: flex
    position: relative
    flex-direction: row
    justify-content: space-between
    align-items: flex-end
    flex-wrap: wrap
    margin-top: 2rem
    z-index: 700

.footer-contact
.footer-corner-box
    margin: 1rem
    flex 1 0 13.5rem

.footer-contact
    margin: 1rem 0.5rem

.footer-icon
    height: $site_footer_icon_width
    width: @height
    margin: 0 auto 1rem

.footer-corner-box
    padding-right: 1rem

// /site footer }}}
// misc {{{

.page_wrap
    min-height: $page_wrap_min-height
    display: flex
    flex-direction: column
    justify-content: space-between
    align-items: stretch

    @media(min-height: $page_wrap_min-height)
        min-height: 100vh

.page_content_wrap
    height: auto
    flex: 1 0 1

.page_content_wrap--page
.page_content_wrap--post
.page_content_wrap--tour
    margin: 0 auto

.page_content_wrap--page
    max-width: 1520px

.page_content_wrap--post
.page_content_wrap--tour
    max-width: 1920px

.page_heading
.section_header
    position: relative
    z-index: 10
    margin: 0
    padding: 1em

.page_heading
    flex: 0 0 100%

.tooltip
    position: absolute
    left: 0
    right: 0
    margin: 0 auto
    padding: 1rem
    opacity: 0

.testimonials
.contacts__wrap
.contact-form__wrap
.review-form__wrap
    SectionWidth()

// /misc }}}
// blocks {{{

.block--breadcrumbs
.block--heading
.block--textual
.block--textimg
.block--bullets
.block--gallery
.block--form
    max-width: $block-width
    margin: 0 auto

    @media (max-width: 931px)
        max-width: calc(100vw - 2rem)

.block--textual
.block--textimg
.block--bullets
.block--gallery
    padding-bottom: 1rem

.block--textual > *
.block--textimg > *
.block--bullets > ul
    margin-left: $block-margins
    margin-right: @margin-left

    @media (max-width: 500px)
        margin-left: 0.5rem
        margin-right: @margin-left

.block--textimg
.block--gallery
    overflow: auto

    &::after
        content: ''
        display: block
        height: 0
        width: 100%
        clear: both

.block--bullets > ul > li
    margin-left: 1rem
    Bullets()

.block--textimg__image__wrap
    float: right
    margin: 2rem
    width: 50%
    max-height: auto
    max-width: 25rem
    overflow: hidden

    @media(max-width: 700px)
        width: 45%

    @media(max-width: 600px)
        width: 100%
        margin: 0 auto
        float: none

.block--textimg__image
    width: 100%
    height: 100%
    object-fit: contain

.block--gallery
    margin-top: 2rem
    column-count: 2

    img
        max-width: calc(100% - 2rem)
        margin: 1rem

.block--no-header
    padding-top: 1rem

// /blocks }}}
// tour cards {{{
.tour__card
    display: flex
    flex-direction: column
    justify-content: space-between

.tour__wrap
    flex: 0 0 285px
    position: relative
    margin: 0 0.5rem 2.5rem

.tour__image__wrap
    max-width: 285px
    max-height: 214px
    overflow: hidden

.tour__image
    width: 103.1%
    max-width: 300px
    transform: scale(0.97, 0.97)
    transform-origin: 0 0
    transition: all .5s ease-out

    .tour__wrap:hover &
    .tour__wrap:focus &
        transform: scale(1, 1)

.tour__title
    padding: 0.6rem
    flex: 1 1 6rem

.tour__length
    display: inline
    text-align: right
    line-height: 2.25rem
    margin-top: -2.25rem
    padding: 0 1rem

@media(max-width: 659px) and (min-width: 565px)
    .tour__wrap
        flex: 0 0 15rem

    .tour__image__wrap
        width: 100%
        min-width: 100%
        max-width: 100%

@media(max-width: 449px)
    .tour__wrap
        flex-grow: 1
        margin-bottom: 1rem

    .tour__image__wrap
    .tour__image
        display: none

// tour cards }}}
// full_tour / full_post / full_vkpost pages {{{
// breadcrumbs {{{

.block--breadcrumbs
    flex: 0 0 100%
    display: flex
    flex-direction: row
    justify-content: flex-start
    flex-wrap: wrap
    margin: 1rem 0

.breadcrumb
    display: flex
    flex-direction: row
    justify-content: flex-start
    align-items: center
    margin: 0 0.5rem

.breadcrumb__label
    textLink($turbo_blue, nohover)
    white-space: nowrap
    padding: 0.75rem 0

.breadcrumb--icon
    order:-1
    margin-right: 1.5rem

.breadcrumb--subtag
    order:2
    margin-left: 1.5rem
    margin-right: -1rem

.breadcrumb__icon
    flex: 0 0 3rem
    display: block
    width: 3rem
    height: @width

.breadcrumb__icon__svg
    fill: $turbo_blue

.breadcrumb
    transition: all 0.3s ease-in-out
    &:hover
    &:focus
        .breadcrumb__icon__svg
            fill: $turbo_brown

        .breadcrumb__label
            textLink($turbo_brown, nohover)

.breadcrumbs--prev-next
    justify-content: space-around

//- /breadcrumbs }}}
// heading {{{

.block--heading
    margin: 1rem 1vw

    &::after
        content: ''
        display: block
        height: 0
        clear: both

// left {{{

.heading__left
    float: left

.heading__date
    color: $turbo_darkblue

// /left }}}
// right {{{

.heading__right
    text-align: right

.heading__details__label
    color: $turbo_darkblue

.heading__details__value
.heading__details__category
    white-space: nowrap

// /right }}}

@media(max-width: 700px)
    .block--heading
        display: block

    .heading__left
    .heading__right
        text-align: center

// /heading }}}

.full_tour__description
.includes__wrap
.additional-fees__wrap
.will-learn__wrap
.blueprint__wrap
.order-form__wrap
    SectionWidth()
    margin-bottom: 2rem

.vk__source__link
    white-space: nowrap

.full-post__description > p
.full-vkpost__description > p
.vk__source
    margin-left: $block-margins
    margin-right: @margin-left

    &:last-child
        margin-bottom: 2rem

    @media(max-width: 500px)
        margin-left: 0.5rem
        margin-right: @margin-left


// /full_tour / full_post / full_vk_post pages }}}
// main page {{{
// first_glance {{{
.first_glance
    width: 100%
    display: flex
    flex-direction: row
    justify-content: space-between
    align-items: stretch
    align-content: flex-start
    flex-wrap: wrap

// site_heading {{{
.site_heading__wrap
    flex: 5 2 34rem
    min-height: 25rem
    display: flex
    flex-direction: row
    justify-content: center
    align-items: center
    flex-wrap: nowrap

.site_heading__text_box
    flex: 0 2 38rem
    margin: 2rem

.site_heading
    padding: 2rem 3rem 3rem

// /site_heading }}}
// /first_glance }}}
// recent_posts {{{
.recent_posts__wrap
    flex: 1 0 19rem

.recent_posts__list
    margin: 0 1rem 1rem 2rem

.recent_post
    Bullets()

// /recent_posts }}}
// upcoming_events {{{
.upcoming_events__wrap
    width: 95vw
    max-width: 68.75rem
    margin: 1rem auto

.upcoming_events__list
    width: 100%
    display: flex
    flex-direction: row
    flex-wrap: nowrap
    justify-content: center
    align-items: stretch

@media(max-width: 1239px)
    .upcoming_events__wrap
        width: 38rem
        max-width: @width

    .upcoming_events__list
        flex-wrap: wrap

@media(max-width: 564px)
    .upcoming_events__wrap
        width: 16rem
        max-width: @width

// /upcoming_events }}}
// news / vknews cards {{{

.newscards__wrap
.vkcards__wrap
    width: 95vw
    max-width: 1100px
    margin: 1rem auto

.card__link
    width: 100%
    position: relative
    z-index: 20
    overflow: none
    display: flex
    flex-direction: row
    flex-wrap: nowrap
    justify-content: center
    align-items: stretch
    margin: 1rem 0 1rem

    &:hover
    &:focus
        z-index: 29

.card__image__wrap
    min-height: 100%
    position: relative
    z-index: 2
    overflow: hidden
    object-fit: cover

.newspost__image__wrap
.vkpost__image__wrap
.guide__image__wrap
    flex 1 1 21.875rem
    line-height: 0
    max-height: 18rem

@media(max-width: 659px)
    .newspost__image__wrap
    .vkpost__image__wrap
        display: none

.card__image
    min-width: 100%
    min-height: 100%
    width: 100%
    height: auto
    object-fit: cover

.card__content__wrap
    flex 1 1 70%
    position: relative
    z-index: 1
    display: flex
    flex-direction: column
    justify-content: space-between
    align-items: stretch

.card__date
    flex: 0 0 2.25rem
    line-height: 2.25rem
    padding: 0 1rem

    &.newspost__date
    &.vkpost__date
        text-align: right

.card__title
    flex 1 1 3rem
    padding: 1rem 0.7rem

.card__summary
    padding: 0 1rem 1rem

.card__button
    flex 0 0 3rem
    padding-left: 1rem
    line-height: 3rem

// /news / vknews cards }}}
// /main page }}}
// tours page {{{

.tours__wrap
    width: 100%
    display: flex
    justify-content: space-between
    min-height: $tours_nav_min-height

// tours page nav {{{

.tours_nav__wrap
    flex: 0 1 25vw
    min-width: 15rem
    margin-bottom: -2rem
    position: relative
    z-index: 10

.tours_nav
    display: flex
    flex-direction: column
    justify-content: flex-start
    margin: 0.5rem 0

.tours_nav__link
    padding: 1em 12% 1em 3%
    white-space: nowrap

    &.active
        z-index: 500

.tours_nav__link--subtag
    padding-right: 18%
    display: none

    &.visible
        display: block

.tours_nav__link--subtag--last
    padding-bottom: 1.5em

// /tours page nav }}}
// tours list {{{

.tours_list__wrap
    flex: 0 1 75vw
    position: relative
    z-index: 0

.tours__section_header
    background: transparent

.tours-tag-info__wrap
    background-image: url(/img/card.png)
    background-color: ivory
    background-repeat: repeat
    background-blend-mode: soft-light

.tours-tag-info__wrap
    margin-top: -5rem
    padding: 2rem $block-margins
    position: relative
    z-index: 5
    box-shadow: 0 0.2rem 1rem -0.25rem $shadowy

.tours-tag-info
    margin: 4rem $block-margins 1rem

.tours_list
    display: flex
    justify-content: space-around
    flex-wrap: wrap
    align-items: stretch
    align-content: flex-start
    margin: 1.5rem 1.5rem

// /tours list }}}

.tours__count
    position: absolute
    right: 1.6rem
    top: 2rem
    z-index: 100

// tours page media {{{

@media(max-width: 1139px)
    .tours_nav
        margin-top: 2.5rem

    .tours_list
        margin-top: 3.5rem

    .tours__count
        top: 4rem

@media(max-width: 899px)
    .tours__wrap
        display: block

    .tours_nav__wrap
        margin-bottom: 0
        padding-bottom: 1rem

    .tours_nav
        margin-top: 0

    .tours_nav__link
        text-align: center

// /tours page media }}}
// /tours page }}}
// about / guide page {{{

.about-info
.guide-text
.advantages__wrap
.guide-form__wrap
    margin: 1rem 1rem 1rem 2rem
    float: left

.guide-form__wrap
    max-width: $block-width
    float: left

.guide-info__wrap
    width: "calc(100vw - %s - 6.5rem)" % $block-width
    max-width: 500px
    min-width: 320px
    margin: 1rem 2rem 1rem 1rem
    float: right

@media (max-width: 1316px)
    .about-info
    .advantages__wrap
    .guide-text
    .guide-form__wrap
        width: calc(100vw - 320px - 6rem)
        max-width: @width

    .guide-info__wrap
        width: 320px
        max-width: @width

@media (max-width: 996px)
    .about-info
    .guide-text
        clear: both
        float: none
        SectionWidth()

    .advantages__wrap
    .guide-form__wrap
        min-width: 330px

@media (max-width: 745px)
    .advantages__wrap
    .guide-form__wrap
    .guide-info__wrap
        clear: both
        float: none

    .advantages__wrap
    .guide-form__wrap
        SectionWidth()

    .guide-info__wrap
        margin-left: auto
        margin-right: @margin-left

// guide card[s] {{{
.guide__card
    display: flex
    flex-direction: column
    justify-content: space-between

.guide__image__wrap
    flex 1 1 21.875rem
    line-height: 0
    max-height: 18rem

.guide__name
    flex-basis: 1.5rem

.guide__resume
    padding-top: 0
    padding-bottom: 1rem

// /guide card[s] }}}
// /about / guide page }}}
// contact page {{{

.contacts__wrap
    display: flex
    flex-direction: row
    flex-wrap: nowrap
    justify-content: center
    margin-bottom: 2rem
    overflow: hidden

.business-info
    flex: 0 0 20rem
    padding: 1rem 0
    order: 1
    display: flex
    flex-direction: column
    flex-wrap: nowrap
    justify-content: flex-start

.brand
.contacts-list
.address
    margin: 1rem 2rem

.business-info
    white-space: nowrap

@media(max-width: 710px)
    .contacts__wrap
        flex-direction: column

    .business-info
        order: -1
        flex: 1 1 100%
        flex-direction: row

    .business-info
        white-space: pre-wrap

@media(max-width: 564px)
    .business-info
        display: block
        text-align: center


.map
    position: relative
    flex: 1 0 20rem
    order: -1

.map__img
    width: 100%
    min-width: 320px
    height: auto
    margin-bottom: -0.30rem

.map__tooltip
    top: 0

    .map:hover &
    .map:focus &
        opacity: 1

// /contact page }}}
// testimonials page {{{

.testimonial
    position: relative
    margin: 0 0 2rem
    padding-top: .5rem

.testimonial__text
    margin: 2rem
    position: relative
    z-index: 100

    @media(max-width: 800px)
        margin: 3rem 3rem

    @media(max-width: 480px)
        margin: 3rem 2rem 3rem 1rem

.testimonial__svg
    position: absolute
    top: 1rem
    left: 1rem
    width: 9rem
    height: auto
    z-index: 99

.testimonial__footer
    padding: .7rem 2rem
    display: flex
    justify-content: space-between
    align-items: center

.testimonial__name
    text-align: right

    &:before
        content: '—  '

.testimonial__date
.testimonial__name
    display: inline
    white-space: nowrap

// /testimonials page }}}
