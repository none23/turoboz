include ../mixins.jade
include form_mixins.jade

mixin SiteNav()
    | {% assign navpages = site.pages | sort: 'innav' %}
    | {% for p in navpages %}
    | {% if p.innav %}
    | {% if p.url > '/' %}
    | {% if page.url contains p.url %}
    a.site_nav__link.active(href='{{ p.url | prepend: site.baseurl }}')
        | {{ p.title }}
    | {% else %}
    a.site_nav__link(href='{{ p.url | prepend: site.baseurl }}')
        | {{ p.title }}
    | {% endif %}
    | {% else %}
    | {% if p.url == page.url %}
    a.site_nav__link.active(href='{{ p.url | prepend: site.baseurl }}')
        | {{ p.title }}
    | {% else %}
    a.site_nav__link(href='{{ p.url | prepend: site.baseurl }}')
        | {{ p.title }}
    | {% endif %}
    | {% endif %}
    | {% endif %}
    | {% endfor %}

mixin SiteContacts()
    a.site_header__phone(href="tel:{{ site.phones | first | remove: ' ' }}")
        | {{ site.phones | first }}
    a.call_back_form__toggle.site_header__call_back(href='#')
        | Заказать звонок
    a.site_header__vk_button(href='https://{{ site.vk_group }}', target='_blank')
        +iconVK('site_header__vk_icon')

header#site_header
    a#site_logo(href='/', tabindex = -1)
        include header_logo.jade
        | {{ site.title }}
    a#mobile_nav_toggle(href='#')
        +iconSiteMenu()
    nav#desktop_nav
        +SiteNav()
    nav#mobile_nav
        +SiteNav()
        +SiteContacts()
    #site_contacts_wrap
        +SiteContacts()
    #call_back_form__wrap.call_back_form__wrap.header_form__wrap
        +CallBackForm()
