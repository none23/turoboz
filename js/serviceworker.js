"use strict";var version="v0.0.3",cache_name=version+"-cache";self.addEventListener("install",function(e){e.waitUntil(caches.open(cache_name).then(function(e){return e.addAll(["/css/site.css","/js/site.js"])}))}),self.addEventListener("fetch",function(e){function t(e){var t=fetch(s).then(c,a).catch(a);return t||e}function n(e){var t=fetch(s).then(c,a).catch(a);return e||t}function c(e){var t=e.clone();return caches.open(cache_name).then(function(e){e.put(s,t)}),e}function a(){return new Response("",{headers:new Headers({"Content-Type":"text/html"}),status:503,statusText:"Service Unavailable"})}var s=e.request,r=new URL(s.url);if("GET"===s.method)return"/"===r.pathname?void e.respondWith(caches.match(s).then(t)):r.pathname.indexOf("/tours")!==-1&&r.pathname.indexOf("/tours/1")===-1?void e.respondWith(caches.match(s).then(t)):void e.respondWith(caches.match(s).then(n))}),self.addEventListener("activate",function(e){e.waitUntil(caches.keys().then(function(e){return Promise.all(e.filter(function(e){return caches.delete(e)}))}))});