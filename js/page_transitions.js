function loadPage(e){return cache[e]?new Promise(function(a){a(cache[e])}):fetch(e,{method:"GET"}).then(function(a){return cache[e]=a.text(),cache[e]})}function changePage(){var e=window.location.href;loadPage(e).then(function(a){var n=document.createElement("div");n.innerHTML=a;var t=document.querySelector(".page_content_wrap"),r=n.querySelector(".page_content_wrap");page_wrap.appendChild(r),animate(t,r),ga("set","page",e),ga("send","pageview")})}function animate(e,a){e.animate({opacity:[1,0]},300);var n=a.animate({opacity:[0,1]},300);n.onfinish=function(){e.parentNode.removeChild(e)}}var cache={},page_wrap=document.querySelector(".page_wrap");window.addEventListener("popstate",changePage),document.addEventListener("click",function(e){if(!e.ctrlKey){for(var a=e.target;a&&!a.href;)a=a.parentNode;return a?void("_blank"==a.target||a.href.indexOf("tel:")!==-1||a.href.indexOf("mailto:")!==-1||(e.preventDefault(),history.pushState(null,null,a.href),changePage())):void 0}});