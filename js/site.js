"use strict";function mobileNav(){var e=document.getElementById("mobile_nav_toggle"),t=document.getElementById("mobile_nav");e.addEventListener("click",function(n){n.preventDefault(),e.classList.toggle("is_open"),t.classList.toggle("is_open")})}function activeNavLink(){for(var e=document.getElementById("site_header").getElementsByClassName("site_nav__link"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){document.querySelector(".site_nav__link.active").classList.remove("active"),e.target.classList.add("active"),document.activeElement.blur()})}function callBackFormToggle(){var e=document.getElementsByClassName("call_back_form__toggle"),t=document.getElementById("call_back_form__wrap"),n=document.querySelector("#site_contacts_wrap .call_back_form__toggle"),o=!0,a=!1,r=void 0;try{for(var i,c=e[Symbol.iterator]();!(o=(i=c.next()).done);o=!0){var l=i.value;l.addEventListener("click",function(e){n&&n.classList.toggle("is_open"),t.classList.toggle("is_open"),t.classList.contains("is_open")&&document.getElementById("call_back_form__name").focus(),e.preventDefault()})}}catch(e){a=!0,r=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw r}}}function enableCallBackForm(){var e,t,n;e=document.getElementById("call_back_form"),e&&(n="Форма успешно отправлена! Мы свяжемся с Вами в ближайшее время.",t=document.getElementById("call_back_form__button"),e.addEventListener("submit",function(o){return iSendAJAX(o,e,t,n)}))}function enableContactForm(){var e,t,n;e=document.getElementById("contact_form"),e&&(n="Форма успешно отправлена! Мы свяжемся с Вами в ближайшее время.",t=document.getElementById("contact_form__button"),e.addEventListener("submit",function(o){return iSendAJAX(o,e,t,n)}))}function enableReviewForm(){var e,t,n;e=document.getElementById("review_form"),e&&(n="Спасибо! Отзыв принят и будет опубликован после проверки.",t=document.getElementById("review_form__button"),e.addEventListener("submit",function(o){return iSendAJAX(o,e,t,n)}))}function enableOrderForm(){var e,t,n;e=document.getElementById("order_form"),e&&(n="Форма успешно отправлена! Мы свяжемся с Вами в ближайшее время для уточнения деталей.",t=document.getElementById("order_form__button"),e.addEventListener("submit",function(o){return iSendAJAX(o,e,t,n)}))}function iSendAJAX(e,t,n,o){var a,r,i={};return i.loading="Отправка...",i.success=o,i.failure="Возникла ошибка при отправке.",r=new XMLHttpRequest,r.open("POST","//formspree.io/n.anisimov.23@gmail.com",!0),r.setRequestHeader("accept","application/json"),a=new FormData(t),r.send(a),n.innerText=i.loading,n.className="form__button--loading",r.onreadystatechange=function(){4===r.readyState&&(200===r.status&&r.status<300?(n.innerText=i.success,n.className="form__button--success"):t.insertAdjacentHTML("beforeend",i.failure))}}!function(){function e(){n.swapCache(),o(document.URL)}var t="page_content_wrap",n=window.applicationCache,o=function(e){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="document",n.onload=function(){var e=this.response.getElementById(t),n=document.getElementById(t),o=n.animate({opacity:[1,0]},200);o.onfinish=function(){n.parentNode.replaceChild(e,n)}},n.send()};n.addEventListener("updateready",e),n.status===n.UPDATEREADY&&e(),setInterval(function(){n.update()},3e5),history&&history.pushState&&(document.addEventListener("click",function(e){if(!e.ctrlKey){for(var t=e.target;t&&!t.href;)t=t.parentNode;if(t){if("_blank"==t.target)return;if(t.href.indexOf("tel:")>=0)return;if(t.href.indexOf("mailto:")>=0)return;if("mobile_nav_toggle"===t.id)return;return e.preventDefault(),o(t.href),void history.pushState(null,null,t.href)}}}),setTimeout(function(){window.onpopstate=function(){o(window.location.href)}},500))}(),function(){window.addEventListener("DOMContentLoaded",function(){mobileNav(),callBackFormToggle(),enableCallBackForm(),enableContactForm(),enableReviewForm(),enableOrderForm(),activeNavLink()})}();