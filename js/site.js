"use strict";function sleep(e){return new Promise(function(t){return setTimeout(t,e)})}function mobileNav(){var e=document.getElementById("mobile_nav_toggle"),t=document.getElementById("mobile_nav");e.addEventListener("click",function(n){n.preventDefault(),e.classList.toggle("is_open"),t.classList.toggle("is_open")})}function activeNavLink(){for(var e=document.getElementById("site_header").getElementsByClassName("site_nav__link"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){document.querySelector(".site_nav__link.active").classList.remove("active"),e.target.classList.add("active"),document.activeElement.blur()})}function callBackFormToggle(){var e=document.getElementsByClassName("call_back_form__toggle"),t=document.getElementById("call_back_form__wrap"),n=document.querySelector("#site_contacts_wrap .call_back_form__toggle"),o=!0,a=!1,r=void 0;try{for(var c,i=e[Symbol.iterator]();!(o=(c=i.next()).done);o=!0){var l=c.value;l.addEventListener("click",function(e){e.preventDefault(),n&&n.classList.toggle("is_open"),t.classList.toggle("is_open"),t.classList.indexOf("is_open")>=0&&t.getElementById("call_back_form__name").focus()})}}catch(e){a=!0,r=e}finally{try{!o&&i.return&&i.return()}finally{if(a)throw r}}}function enableCallBackForm(){var e,t,n;e=document.getElementById("call_back_form"),e&&(n="Форма успешно отправлена! Мы свяжемся с Вами в ближайшее время.",t=document.getElementById("call_back_form__button"),e.addEventListener("submit",function(o){return iSendAJAX(o,e,t,n)}))}function enableContactForm(){var e,t,n;e=document.getElementById("contact_form"),e&&(n="Форма успешно отправлена! Мы свяжемся с Вами в ближайшее время.",t=document.getElementById("contact_form__button"),e.addEventListener("submit",function(o){return iSendAJAX(o,e,t,n)}))}function enableReviewForm(){var e,t,n;e=document.getElementById("review_form"),e&&(n="Спасибо! Отзыв принят и будет опубликован после проверки.",t=document.getElementById("review_form__button"),e.addEventListener("submit",function(o){return iSendAJAX(o,e,t,n)}))}function enableOrderForm(){var e,t,n;e=document.getElementById("order_form"),e&&(n="Форма успешно отправлена! Мы свяжемся с Вами в ближайшее время для уточнения деталей.",t=document.getElementById("order_form__button"),e.addEventListener("submit",function(o){return iSendAJAX(o,e,t,n)}))}function iSendAJAX(e,t,n,o){var a,r,c;return e.preventDefault(),r={},r.loading="Отправка...",r.success=o,r.failure="Возникла ошибка при отправке.",c=new XMLHttpRequest,c.open("POST","//formspree.io/n.anisimov.23@gmail.com",!0),c.setRequestHeader("accept","application/json"),a=new FormData(t),c.send(a),c.onreadystatechange=function(){c.readyState<4?(n.innerHTML=r.loading,n.className="form__button--loading"):4===c.readyState&&(200===c.status&&c.status<300?(n.innerHTML=r.success,n.className="form__button--success"):t.insertAdjacentHTML("beforeend",r.failure))}}!function(){window.addEventListener("DOMContentLoaded",function(e){mobileNav(),callBackFormToggle(),enableCallBackForm(),enableContactForm(),enableReviewForm(),enableOrderForm(),activeNavLink()})}();